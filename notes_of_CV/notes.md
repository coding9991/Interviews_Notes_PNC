# 实习—卡睿智行
## 1.刹车油门标定表制作流程，遇到的主要问题是什么？
1.由于传感器的布置可能存在误差，所以首先需要对车辆进行一个俯仰角的标定，选取的方式是在某个方向记录车辆的俯仰角，随后将车头调转180度再次记录，二者加和后取平均值就可以得到pitch角的补偿。<br>
2.随后进行车辆数据记录，根据指定的速度范围、油门刹车范围进行数据录制，在小油门开度下，车辆可能无法加速到指定速度上限，此时先把车辆加速到指定速度，随后调整到目标开度，记录车辆减速度。<br>
3.数据剪切，需要剪切掉车辆在换档阶段、非目标速度区间、非目标刹车油门开度、非自动驾驶模式下的数据，这里比较棘手的是换档阶段数据的识别，因为在换档阶段会出现速度略微下降和加速度的大幅下降，因此如果标定表包含了这部分数据，会对控制效果产生较大的影响,线控底盘反馈的档位信息不一定能准确的描述换档过程,所以需要对换档发生点进行辨识，主要选取的是速度降低和加速度降低这一特点，当出现连续10个点速度差分和加加速度小于0认为换档开始，记录此时的速度、加速度，随后当连续10个点速度差分和加加速度大于0时，认为换档阶段结束，随后继续遍历，当速度达到换档前的速度时认为换档阶段结束，将这两个索引间的数据直接过滤。<br>
4.数据合并，将特定刹车油门开度的文件合并为一个，根据车速进行排序，得到speed, acceleration, mode的一个三维数据<br>
5.利用低通滤波器进行滤波，降低传感器噪声产生的影响<br>
6.最终的标定表是设置每0.2m/s一个点，该点的加速度取值是周围正负0.05m/s的均值，如果周围的点数量为空，则利用线性插值的方法在中间插值<br>
7.输出标定表，利用pyeharts库的scatter生成曲面查看标定效果。<br>

## 2.低通滤波器阶数和截止频率对滤波性能有什么影响？为什么经过低通滤波后又利用二次规划进行曲线平滑？
高阶滤波器在伯德图上幅值响应截止频率之前衰减更小，截止频率之后随频率增加衰减更大，说人话就是阶数越高的滤波器对截止频率之内的有效信号幅值特征保留更完整，对截止频率之外的噪声衰减更迅速，但是增加阶数可能会造成严重的相位滞后；降低截止频率可以增强噪声过滤效果。


分析测试数据时，发现由于场地的影响（路面有坑洼）、传感器自身性能的原因，使用低通滤波器不能使曲线完全平滑，为了保证最终生成曲线的平滑性

## 3.Kalman、Lpf、RTS算法的原理是什么？

## 4.FEM Smoother的算法原理是什么，评价函数如何设计，参数如何选取的

## 5.换档点是如何辨识的？阈值如何确定

## 6.对线控底盘的哪些特性进行了分析？

## 7.MPC基于什么模型设计，选取了哪些状态量，如何应用曲率突变，选用了什么求解其，转化为二次规划问题的自变量是什么？

## 8.挂车模型是基于哪种模型进行开发的，状态量有哪些，做了哪些简化？