# 规划控制通用知识
## 1.为什么需要使用四元数？什么是万向锁现象？
三维空间刚体的旋转可以由两种方式来表示，一种是任何一个旋转可以表示为依次绕着三个旋转轴三个角度的组合，这三个角度称为欧拉角，另一种是任何一个旋转可以用绕三维空间的某个轴旋转过某个角度来表示。<br>
四元数的最直观几何意义即是，将绕坐标轴的多次旋转等效为绕某一轴旋转一定角度，不管是roll、pitch、yaw还是欧拉角，都可以用四元数来替代表达。<br>
意义：
1. 因为欧拉角的表示方式不唯一，在给定某个起始方向和目标方向时，即使给定yaw pitch roll的顺序，也可以通过不同的yaw/pitch/roll的角度组合来实现所需的旋转，这是由于万向锁引起的
2. 欧拉角的插值比较难
3. 计算旋转变换时，一般需要转换成旋转矩阵，这时候需要计算很多sin和cos，计算量较大，替换为四元数后，和旋转矩阵可以等价，但是表示方式更紧凑，计算量也较小。

## 2.Apollo目前的控制算法存在哪些问题？
1. 在LQR/MPC的车辆模型中，随着加速度的变化可以对车辆模型的参数矩阵做实时调整(lf lr Cf Cr会随着载荷转移而变化)
2. MPC控制器可以考虑引入增量式模型，这样可以对控制量的变化率作约束，提高车辆的稳定性，同时可以设计更多的评价指标增加平顺性
3. 横向误差的计算选取的是匹配点，而纵向误差的计算选取的是根据时间戳得到的参考点，二者的不一致会不会造成不好的影响？
4. 在MPC控制器中，方向盘转角前馈控制设计不能使得稳态误差为0，计算二次规划问题时引入参考曲率项可以消除稳态误差（变为非线性优化问题计算量大大增加？）

## 3.Apollo中横向误差的计算选取的是匹配点，而纵向误差的计算选取的是根据时间戳得到的参考点，二者的不一致会不会造成不好的影响？


## 4.什么是转向不足和转向过度？

## 5.二自由度车辆模型做了哪些假设？为什么一般选择二自由度车辆模型？

# PID控制
## 1. PID分别代表什么，各自起到什么作用，有什么缺陷？

## 2. 为什么一般积分控制、微分控制不单独使用？

## 3. 什么是积分饱和，该如何解决？

## 4. PID控制该如何进行参数调节？

# 纯追踪控制
## 1.预瞄距离是如何设计的？

# LQR
## 1.为什么需要引入前馈控制？
因为推导出来的状态空间方程存在非线性项，和道路曲率的变化率相关，因此通过LQR反馈控制不能完全消除稳态误差，因此需要设计和道路曲率变化率相关的前馈控制器消除稳态误差。

## 2.LQR控制器有什么使用条件？如何保证LQR的稳定性？
LQR只适用于线性系统，并且要求系统能控，，否则求解的控制律会不收敛。<br>
当1.Q>0或者2.Q>=0且(A,Q)可观测两个条件满足其中一个时，才能保证闭环系统是渐进稳定的。<br>

## 3.当LQR基于的模型不准确时（例如车辆工况不符合车辆模型所作的假设时），应当如何保障控制效果？

## 4.LQR控制器的稳定性如何证明？

# MPC
## 1.谈谈LQR和MPC有什么区别？

## 2.MPC和PID控制有什么区别？相较于PID控制有什么优势？
MPC相较于传统的PID控制，它具有优化和预测的能力，即模型预测控制是一种致力于将更长时间跨度、甚至于无穷时间的最优化控制问题，分解为若干个更短时间跨度，或者有限时间跨度的最优化控制问题，并且在一定程度上仍然追求最优解。

## 3.MPC中的前馈控制器是如何设计的

## 4.mpc控制器的稳定性如何证明？

# 优化问题
## 1.常见的二次规划求解器有哪些？求解原理有哪些？
osqp casadi qpoases hpipm

## 2.常见的凸优化问题求解方法有哪些？

## 3.详细描述一下梯度下降法的求解过程

## 4.二次规划求解器在处理非线性约束和线性约束时有什么区别？

## 5.求解二次规划问题时该如何提升求解速度和求解成功率？
二次规划问题的求解速度和怎么构造优化问题有一定的联系, 要想提升整体的求解速度和求解成功率, 应该尽量少的使用等式约束。